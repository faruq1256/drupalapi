(this.webpackJsonpdrupalapi=this.webpackJsonpdrupalapi||[]).push([[0],{21:function(e,t,a){},63:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(1),s=a(31),r=a.n(s),l=a(5),o=(a(18),a(21),a(6)),i=a(2),j=function(e){var t=e.Atoken;return console.log("authTokens "+t),Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("div",{className:"container-fluid nav_bg",children:Object(n.jsx)("div",{className:"row",children:Object(n.jsx)("div",{className:"col-10 max-auto max_auto",children:Object(n.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light",children:[Object(n.jsx)(l.b,{to:"/",className:"navbar-brand",children:"Drupal API"}),Object(n.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(n.jsx)("span",{className:"navbar-toggler-icon"})}),Object(n.jsx)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:Object(n.jsxs)("ul",{className:"navbar-nav ml-auto",children:[Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsx)(l.b,{exact:!0,className:"nav-link",to:"/",children:"Home"})}),Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsx)(l.b,{exact:!0,className:"nav-link",to:"/node/add",children:"Create Node"})}),Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsx)(l.b,{exact:!0,className:"nav-link",to:"/node/list",children:"List Nodes"})}),t?Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsx)(l.b,{exact:!0,className:"nav-link",to:"/logout",children:"Logout"})}):Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsx)(l.b,{exact:!0,className:"nav-link",to:"/login",children:"Login"})}),Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsx)(l.b,{exact:!0,className:"nav-link",to:"/register",children:"Register"})})]})]})})]})})})})})},d=function(){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{className:"my-5",children:Object(n.jsx)("h1",{className:"text-center",children:"Home Page"})}),Object(n.jsx)("div",{className:"container contact_div",children:Object(n.jsx)("div",{className:"row",children:Object(n.jsx)("div",{className:"col-md-6 col-10 max-auto max_auto",children:Object(n.jsx)("div",{className:"row"})})})})]})},b=a(4),m=a.n(b),u=a(12),h=a(13),x=a(8),O=a(33),p=a.n(O).a.create({baseURL:"http://janari.in/drupal",headers:{"Content-Type":"application/hal+json",Accept:"application/json","X-CSRF-Token":localStorage.getItem("csrf")}});p.interceptors.request.use((function(e){var t=localStorage.getItem("token"),a=localStorage.getItem("csrf");return t&&(console.log("Interceptors..."+t),e.headers.Authorization="Basic ".concat(t),e.headers["X-CSRF-Token"]=a),e})),p.interceptors.response.use((function(e){return e}));var v=p,f=function(e){var t=Object(c.useState)({title:"",body:""}),a=Object(o.a)(t,2),s=a[0],r=a[1],l=Object(c.useState)(!1),i=Object(o.a)(l,2),j=i[0],d=i[1],b=function(e){var t=e.target,a=t.name,n=t.value;r((function(e){return Object(x.a)(Object(x.a)({},e),{},Object(h.a)({},a,n))}))};return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{className:"my-5",children:Object(n.jsx)("h1",{className:"text-center",children:"Create Node"})}),Object(n.jsx)("div",{className:"container contact_div",children:Object(n.jsx)("div",{className:"row",children:Object(n.jsx)("div",{className:"col-md-6 col-10 max-auto max_auto",children:Object(n.jsx)("div",{className:"row",children:Object(n.jsxs)("form",{onSubmit:function(t){t.preventDefault();var a=s.title,n=s.body;function c(){return(c=Object(u.a)(m.a.mark((function t(){var c;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c={_links:{type:{href:"http://janari.in/drupal/rest/type/node/article"}},title:[{value:a}],type:[{target_id:"article"}],body:[{value:n}]},t.next=3,v.post("/entity/node?_format=hal_json",c).then((function(t){d(!1),e.history.push("/node/list")})).catch((function(e){console.log("AXIOS ERROR: ",e)}));case 3:t.sent;case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){c.apply(this,arguments)}()},children:[Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{children:"Title"}),Object(n.jsx)("input",{type:"text",className:"form-control",name:"title",value:s.title,onChange:b,"aria-describedby":"emailHelp",placeholder:"Enter Title"})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{children:"Body"}),Object(n.jsx)("textarea",{name:"body",className:"form-control",onChange:b,rows:"5",defaultValue:s.body,placeholder:"Enter Message"})]}),Object(n.jsx)("button",{type:"submit",className:"btn btn-primary",onClick:function(){d(!0)},children:"Create"}),j?Object(n.jsx)("div",{className:"spinner-border",role:"status",children:Object(n.jsx)("span",{className:"sr-only",children:"Loading..."})}):""]})})})})})]})},g=Object(c.createContext)();function N(){return Object(c.useContext)(g)}var y=function(e){var t=Object(c.useState)(!1),a=Object(o.a)(t,2),s=a[0],r=a[1],l=N().setAuthTokens,j=Object(c.useState)({name:"",pass:""}),d=Object(o.a)(j,2),b=d[0],O=d[1],p=Object(c.useState)(!1),f=Object(o.a)(p,2),g=f[0],y=f[1],S=function(e){var t=e.target.name,a=e.target.value;O((function(e){return Object(x.a)(Object(x.a)({},e),{},Object(h.a)({},t,a))}))};return s?Object(n.jsx)(i.a,{to:"/node/add"}):Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{className:"my-5",children:Object(n.jsx)("h1",{className:"text-center",children:"Login Page"})}),Object(n.jsx)("div",{className:"container contact_div",children:Object(n.jsx)("div",{className:"row",children:Object(n.jsx)("div",{className:"col-md-6 col-10 max-auto max_auto",children:Object(n.jsx)("div",{className:"row",children:Object(n.jsxs)("form",{onSubmit:function(e){e.preventDefault(),y(!0),console.log(b);var t=b.name,a=b.pass;function n(){return(n=Object(u.a)(m.a.mark((function e(){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={name:t,pass:a},e.next=3,v.post("/user/login?_format=json",n).then((function(e){console.log("RESPONSE RECEIVED: ",e.data);var n=window.btoa(t+":"+a);localStorage.setItem("token",n),localStorage.setItem("csrf",e.data.csrf_token),l(e.data),r(!0)})).catch((function(e){console.log("AXIOS ERROR: ",e)}));case 3:e.sent;case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return function(){return n.apply(this,arguments)}()},children:[Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{children:"User Name"}),Object(n.jsx)("input",{type:"text",className:"form-control",name:"name",value:b.name,onChange:S,"aria-describedby":"emailHelp",placeholder:"Enter username"}),Object(n.jsx)("small",{id:"emailHelp",className:"form-text text-muted",children:"We'll never share your email with anyone else."})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{children:"Password"}),Object(n.jsx)("input",{type:"password",name:"pass",value:b.pass,onChange:S,className:"form-control",id:"exampleInputPassword1",placeholder:"Password"})]}),Object(n.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"}),g?Object(n.jsx)("div",{className:"spinner-border",role:"status",children:Object(n.jsx)("span",{className:"sr-only",children:"Loading..."})}):""]})})})})})]})},S=function(e){var t=localStorage.getItem("logout_token");function a(){return(a=Object(u.a)(m.a.mark((function a(){return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,v.post("/user/logout?_format=json&token=".concat(t)).then((function(t){console.log("RESPONSE RECEIVED: ",t.data),c(),e.history.push("/")})).catch((function(e){console.log("AXIOS ERROR: ",e)}));case 2:a.sent;case 3:case"end":return a.stop()}}),a)})))).apply(this,arguments)}if(!t)return c(),Object(n.jsx)(i.a,{to:"/"});function c(){localStorage.removeItem("token"),localStorage.removeItem("logout_token"),localStorage.removeItem("csrf")}return function(){a.apply(this,arguments)}(),Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("h1",{children:"Logout Page"})})},w=function(e){return console.log(e),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{className:"col-md-10 col-10 ",children:Object(n.jsx)("div",{className:"row",children:Object(n.jsxs)("a",{href:"#",className:"list-group-item list-group-item-action flex-column align-items-start",children:[Object(n.jsxs)("div",{className:"d-flex w-100 justify-content-between",children:[Object(n.jsx)("h5",{className:"mb-1",children:e.title}),Object(n.jsxs)("small",{children:["By: ",e.author]})]}),Object(n.jsx)("p",{className:"mb-1",children:e.body})]})})}),Object(n.jsx)("br",{})]})},k=function(){var e=Object(c.useState)([]),t=Object(o.a)(e,2),a=t[0],s=t[1];function r(){return(r=Object(u.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.get("/rest/list/nodes?_format=json").then((function(e){console.log("AXIOS RESPONSE: ",e.data),s(e.data)})).catch((function(e){console.log("AXIOS ERROR: ",e)}));case 2:e.sent;case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){!function(){r.apply(this,arguments)}()}),[]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{className:"my-5",children:Object(n.jsx)("h1",{className:"text-center",children:"List Nodes"})}),Object(n.jsx)("div",{className:"container contact_div",children:Object(n.jsx)("div",{className:"row",children:a.map((function(e,t){return Object(n.jsx)(w,{title:e.title,body:e.body,author:e.uid},t)}))})})]})},E=function(){return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("footer",{className:"w-100 bg-light text-center",children:Object(n.jsx)("p",{children:"@2020 Drupal API Example. All rights reservec"})})})},R=a(34),I=function(e){var t=e.component,a=Object(R.a)(e,["component"]),c=N().authTokens;return Object(n.jsx)(i.b,Object(x.a)(Object(x.a)({},a),{},{render:function(e){return c?Object(n.jsx)(t,Object(x.a)({},e)):Object(n.jsx)(i.a,{to:"/login"})}}))},_=function(e){var t=Object(c.useState)({name:"",mail:"",pass:""}),a=Object(o.a)(t,2),s=a[0],r=a[1],l=Object(c.useState)(!1),i=Object(o.a)(l,2),j=i[0],d=i[1],b=function(e){var t=e.target.name,a=e.target.value;r((function(e){return Object(x.a)(Object(x.a)({},e),{},Object(h.a)({},t,a))}))};return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{className:"my-5",children:Object(n.jsx)("h1",{className:"text-center",children:"Register Page"})}),Object(n.jsx)("div",{className:"container contact_div",children:Object(n.jsx)("div",{className:"row",children:Object(n.jsx)("div",{className:"col-md-6 col-10 max-auto max_auto",children:Object(n.jsx)("div",{className:"row",children:Object(n.jsxs)("form",{onSubmit:function(t){t.preventDefault(),d(!0),console.log(s);var a=s.name,n=s.pass,c=s.mail;function r(){return(r=Object(u.a)(m.a.mark((function t(){var s;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s={_links:{type:{href:"http://janari.in/drupal/rest/type/user/user"}},name:[{value:a}],mail:[{value:c}],pass:[{value:n}]},t.next=3,v.post("/user/register?_format=json",s).then((function(t){console.log("RESPONSE RECEIVED: ",t.data),d(!1),e.history.push("/login")})).catch((function(e){console.log("AXIOS ERROR: ",e),d(!1)}));case 3:t.sent;case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){r.apply(this,arguments)}()},children:[Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{children:"User Name"}),Object(n.jsx)("input",{type:"text",className:"form-control",name:"name",value:s.name,onChange:b,"aria-describedby":"emailHelp",placeholder:"Enter username"}),Object(n.jsx)("small",{id:"emailHelp",className:"form-text text-muted",children:"We'll never share your email with anyone else."})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{children:"Email"}),Object(n.jsx)("input",{type:"email",className:"form-control",name:"mail",value:s.mail,onChange:b,"aria-describedby":"emailHelp",placeholder:"Enter Email"}),Object(n.jsx)("small",{id:"emailHelp",className:"form-text text-muted",children:"We'll never share your email with anyone else."})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{children:"Password"}),Object(n.jsx)("input",{type:"password",name:"pass",value:s.pass,onChange:b,className:"form-control",id:"exampleInputPassword1",placeholder:"Password"})]}),Object(n.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"}),j?Object(n.jsx)("div",{className:"spinner-border",role:"status",children:Object(n.jsx)("span",{className:"sr-only",children:"Loading..."})}):""]})})})})})]})},C=function(e){var t=localStorage.getItem("token"),a=Object(c.useState)(t),s=Object(o.a)(a,2),r=s[0],l=s[1];return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(j,{Atoken:r}),Object(n.jsx)(g.Provider,{value:{authTokens:r,setAuthTokens:function(e){localStorage.setItem("tokens",e),l(e)}},children:Object(n.jsxs)(i.d,{children:[Object(n.jsx)(i.b,{exact:!0,path:"/",component:d}),Object(n.jsx)(i.b,{exact:!0,path:"/login",component:y}),Object(n.jsx)(i.b,{exact:!0,path:"/logout",component:S}),Object(n.jsx)(i.b,{exact:!0,path:"/register",component:_}),Object(n.jsx)(I,{exact:!0,path:"/node/add",component:f}),Object(n.jsx)(I,{exact:!0,path:"/node/list",component:k}),Object(n.jsx)(i.a,{to:"/"})]})}),Object(n.jsx)(E,{})]})};r.a.render(Object(n.jsx)(l.a,{basename:"/drupalapi",children:Object(n.jsx)(C,{})}),document.getElementById("root"))}},[[63,1,2]]]);
//# sourceMappingURL=main.38986f18.chunk.js.map